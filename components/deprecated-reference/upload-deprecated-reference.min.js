!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","lodash","jquery","dropzone","angular","angular-material"],factory):factory(root.Stratus,root._,root.jQuery,root.Dropzone)}(this,function(Stratus,_,jQuery,Dropzone){Stratus.Components.Upload={transclude:!0,bindings:{elementId:"@",mediaId:"<"},controller:function($scope,$element,$attrs,$window){this.uid=_.uniqueId("upload_"),Stratus.Instances[this.uid]=$scope,$scope.elementId=$attrs.elementId||this.uid,$scope.mediaId=$attrs.mediaId||null,$scope.$watch("$ctrl.mediaId",function(data){"number"==typeof data&&($scope.mediaId=data)}),$scope.dropzone=null,$scope.interval=$window.setInterval(function(){let $target=jQuery("#"+$scope.elementId);!$target.length||$scope.dropzone||$scope.mediaId&&"number"!=typeof $scope.mediaId||($scope.dropzone=new Dropzone($target[0],{url:"https://app002.sitetheory.io:3000/?session="+_.cookie("SITETHEORY")+($scope.mediaId?"&id="+$scope.mediaId:""),method:"POST",parallelUploads:$scope.mediaId?1:5,clickable:!0,maxFiles:$scope.mediaId?1:null}),$target.addClass("dropzone"),$window.clearInterval($scope.interval))},500)},templateUrl:Stratus.BaseUrl+Stratus.BundlePath+"components/upload"+(Stratus.Environment.get("production")?".min":"")+".html"}});