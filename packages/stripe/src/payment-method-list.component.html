<div [attr.id]="elementId">
    <mat-progress-bar *ngIf="collection.pending" mode="indeterminate"></mat-progress-bar>
    <div *ngIf="collection.completed && !collection.pending && collection.models.length === 0" class="no-results">
        No Payment Methods on file.
    </div>
    <mat-card
            *ngFor="let paymentMethod of collection.models"
            [attr.id]="elementId+'_'+paymentMethod.data.id"
            class="payment-method-container"
            [class.model-changed]="paymentMethod.changed"
            [class.model-pending]="paymentMethod.pending"
            tabindex="{{paymentMethod.data.id}}"
    >
        <!-- Delete button -->
        <!--a href="javascript:void(0)"
           tabindex="-1"
           data-ng-controller="Dialogue" data-ng-model="paymentMethod" data-template="#delete-payment-method-dialogue"
           [disabled]="!collection.completed || collection.pending"
           (click)="show($event)"
           class="action-buttons delete-button default-border-radius"
           matTooltip="Delete Payment Method"
        >
            <mat-icon
                    [svgIcon]="getSvg('sitetheorycore/images/icons/actionButtons/delete.svg') | async"
                    aria-hidden="true"
            ></mat-icon>
        </a-->
        <button href="javascript:void(0)"
           tabindex="-1"
           [disabled]="!collection.completed || collection.pending"
           (click)="show($event)"
           class="action-buttons delete-button default-border-radius"
           matTooltip="Delete Payment Method"
        >
            Delete
            <!--mat-icon
                    [svgIcon]="getSvg('sitetheorycore/images/icons/actionButtons/delete.svg') | async"
                    aria-hidden="true"
            ></mat-icon-->
        </button>
        <!--mat-card-content>
            <p [innerHTML]="paymentMethod.data.name"></p>
            <p>
                <span [innerHTML]="paymentMethod.data.brand"></span> ...<span [innerHTML]="paymentMethod.data.last4"></span> - Expires <span [innerHTML]="paymentMethod.data.exp_month"></span>/<span [innerHTML]="paymentMethod.data.exp_year"></span>
            </p>
        </mat-card-content-->
        <mat-card-content>
            <mat-grid-list cols="4" rowHeight="35px">
                <mat-grid-tile colspan="4">
                    <span [innerHTML]="paymentMethod.data.name" class="aligned-tile name" [style.justifyContent]="'flex-start'"></span>
                </mat-grid-tile>
                <mat-grid-tile colspan="1">
                    <span [innerHTML]="paymentMethod.data.brand" class="aligned-tile brand" [style.justifyContent]="'flex-start'"></span>
                </mat-grid-tile>
                <mat-grid-tile colspan="2">
                    <span class="aligned-tile last-four" [style.justifyContent]="'flex-end'">...<span [innerHTML]="paymentMethod.data.last4"></span></span>
                </mat-grid-tile>
                <mat-grid-tile colspan="1">
                    <span class="aligned-tile expiration" [style.justifyContent]="'flex-end'">
                        Expires <span [innerHTML]="paymentMethod.data.exp_month"></span>/<span [innerHTML]="paymentMethod.data.exp_year"></span>
                    </span>
                </mat-grid-tile>
            </mat-grid-list>
        </mat-card-content>
    </mat-card>
    <sa-stripe-setup-intent
            [hidden]="!collection.completed || collection.pending"
            data-detailed-billing-info="true"
    ></sa-stripe-setup-intent>

    <!--delete dialogue popup -->
    <!--script type="text/ng-template" id="delete-payment-method-dialogue">
        <md-dialog aria-label="Delete Payment Method">
            <md-dialog-content class="md-dialog-content">
                <h2 class="md-title">Warning</h2>
                <p>Are you sure you want to delete this Payment Method? (this doesn't work yet)</p>
            </md-dialog-content>
            <md-dialog-actions>
                <button mat-button
                        class="md-icon-button btn-delete"
                        aria-label="Confirm Delete"
                        (click)="hide()"
                >
                    <mat-icon
                            [svgIcon]="getSvg('sitetheorycore/images/icons/actionButtons/delete.svg') | async"
                            aria-hidden="true"
                    ></mat-icon>
                </button>
                <button mat-button aria-label="Cancel" (click)="hide()">
                    Cancel
                </button>
            </md-dialog-actions>
        </md-dialog>
    </script-->
</div>
