//     Stratus.Views.Link.js 1.0
//     Copyright (c) 2016 by Sitetheory, All Rights Reserved
//
//     All information contained herein is, and remains the
//     property of Sitetheory and its suppliers, if any.
//     The intellectual and technical concepts contained herein
//     are proprietary to Sitetheory and its suppliers and may be
//     covered by U.S. and Foreign Patents, patents in process,
//     and are protected by trade secret or copyright law.
//     Dissemination of this information or reproduction of this
//     material is strictly forbidden unless prior written
//     permission is obtained from Sitetheory.
//
//     For full details and documentation:
//     http://docs.sitetheory.io
!function(t,i){"function"==typeof define&&define.amd?define(["stratus","zepto","underscore","stratus.views.widgets.base"],i):i(t.Stratus,t.$,t._)}(this,function(t,i,e){t.Views.Widgets.Link=t.Views.Widgets.Base.extend({model:t.Models.Generic,template:e.template('{% if (options.icon) { %}{% if (options.gradient) { %}<div class="{{ options.gradient }}"></div>{% } %}<span id="{{ elementId }}" class="{{ options.classBtn }}">{{ options.icon }}</span>{% } %}{% if (options.textOn) { %}<span class="{{ options.classOn}}">{{ options.textOn }}</span>{% } %}{% if (options.textOff) { %}<span class="{{ options.classOff}}">{{ options.textOff }}</span>{% } %}'),options:{"private":{autoSave:!1,dataType:null},"public":{editable:!1,gradient:!1,icon:null,iconPath:"@SitetheoryCoreBundle:images/icons/actionButtons/preview.svg",textOn:"Hide",textOff:"Show",classBtn:"btnIcon",classOn:"btnText smallLabel textOn",classOff:"btnText smallLabel textOff",urlVars:null,replaceUrl:!1}},originalUrl:null,promise:function(i,e,n){this.originalUrl=this.$el.attr("href"),this.options.iconPath?t.Internals.Resource(this.options.iconPath,this.element).then(function(t){this.options.icon=t,this.initializeSetup(),e(this)}.bind(this)):(this.initializeSetup(),e(this))},initializeSetup:function(){return"var"!==this.options.dataType||t.Environment.has(this.propertyName)||t.Environment.set(this.propertyName,this.options.valueOff),this.render(),!0},onRender:function(t){"model"===this.options.dataType&&this.model.on("change",this.scopeChanged,this),this.scopeChanged()},validate:function(){return!!this.$el.data("property")||(t.Events.trigger("toast","The data-property attribute is missing.","Missing Data Attribute","danger"),!1)},scopeChanged:function(){return this.$el.attr("href",(this.options.replaceUrl?"":this.originalUrl)+this.getPropertyValue()+this.options.urlVars),!0}})});