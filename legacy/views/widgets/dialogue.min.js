!function(e,t){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","tether","stratus.views.widgets.base"],t):t(e.Stratus,e.$,e._,e.Tether)}(this,function(e,t,i,n){e.Views.Widgets.Dialogue=e.Views.Widgets.Base.extend({template:i.template("{{ model.id }}"),el:function(){return'[data-collection="'+this.collection.globals.get("uid")+'"][data-entity="'+this.model.collection.globals.get("entity")+'"][data-id="'+this.model.get("id")+'"][data-dialogue="true"]'},events:{click:"open",dblclick:"open"},timestamp:Date.now(),templateRender:"dialogue",tether:null,preOptions:function(e){this.globals=e.globals||{},this.widget=e.widget||null},onRender:function(e){return this.widget&&this.widget.initializer.then(function(){this.primeTether()}.bind(this)),this},primeTether:function(){this.widget.$el.length&&(this.tether=new n({element:this.$el.selector,target:this.widget.$el.selector,attachment:"top left",targetAttachment:"top right"}))},refresh:function(){this.primeTether()},onRegister:function(){return t(document).click(function(e){this.$el.notClicked(e)&&this.widget.$el.notClicked(e)&&this.close()}.bind(this)),!0},open:function(){return this.$el.addClass("initialize-dialogue")},close:function(){return this.$el.removeClass("initialize-dialogue")}})});